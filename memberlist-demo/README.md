# Memberlist 集群演示

基于 hashicorp/memberlist 的三节点集群演示项目。

## 快速开始

### 1. 启动完整集群
```bash
./start-cluster.sh
```

### 2. 手动启动节点
```bash
# 启动种子节点
go run main.go 1

# 在新终端启动节点2并加入集群
go run main.go 2 127.0.0.1:7947

# 在新终端启动节点3并加入集群  
go run main.go 3 127.0.0.1:7947
```

### 3. 运行测试场景
```bash
./test-scenarios.sh
```

## 测试场景

- **集群启动**: 三个节点依次启动并加入集群
- **成员变更**: 动态添加新节点到集群
- **故障模拟**: 杀死节点进程模拟故障
- **故障检测**: 观察其他节点如何检测到故障节点

## 端口分配

- 节点1: 7947
- 节点2: 7948  
- 节点3: 7949
- 节点4: 7950

## 观察要点

1. 节点加入时的 NotifyJoin 事件
2. 节点离开时的 NotifyLeave 事件
3. 集群成员列表的实时更新
4. 故障检测和恢复机制
